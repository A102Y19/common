import pytesseract
import pyautogui
import cv2
import time
from PIL import Image

def read_information_popup_with_ocr():
    print("üì∏ Taking screenshot for OCR...")

    # Wait a bit to ensure popup is visible
    time.sleep(2)
    
    # Take full screen screenshot
    screenshot = pyautogui.screenshot()
    screenshot.save("full_screen.png")

    # Load with OpenCV
    image = cv2.imread("full_screen.png")

    # Optional: convert to grayscale for better accuracy
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # OCR processing
    text = pytesseract.image_to_string(gray)

    print("üßæ OCR Extracted Text:")
    print("-" * 40)
    print(text)
    print("-" * 40)

    # Check for known success or error keywords
    if "success" in text.lower():
        print("‚úÖ Detected SUCCESS from OCR.")
    elif "error" in text.lower():
        print("‚ùå Detected ERROR from OCR.")
    else:
        print("‚ö†Ô∏è OCR could not confidently classify the message.")

